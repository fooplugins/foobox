var FooBox;(()=>{"use strict";var e,t={80:(e,t,r)=>{r.d(t,{default:()=>D});var i={};r.r(i),r.d(i,{defaults:()=>p,extend:()=>h,getProperty:()=>o,hasProperty:()=>n,merge:()=>u,mergeMissing:()=>l,objForEach:()=>g,objReduce:()=>f,removeProperty:()=>a,setProperty:()=>c});var s=r(320);function n(e,t){if((0,s.isPlainObject)(e)&&(0,s.isStringNotEmpty)(t)){if(-1===t.indexOf("."))return e.hasOwnProperty(t);{const r=t.split("."),i=r.length,n=i-1;let a=0,o=e;for(;a<i;a++){const e=r[a];if(a===n)return o.hasOwnProperty(e);if(!(0,s.isPlainObject)(o[e]))return!1;o=o[e]}}}return!1}function a(e,t){if((0,s.isPlainObject)(e)&&(0,s.isStringNotEmpty)(t))if(-1!==t.indexOf(".")){const r=t.split("."),i=r.length,n=i-1;let a=0,o=e;for(;a<i;a++){const e=r[a];a===n?delete o[e]:(0,s.isPlainObject)(o[e])&&(o=o[e])}}else delete e[t]}function o(e,t,r){if((0,s.isPlainObject)(e)&&(0,s.isStringNotEmpty)(t))if(-1!==t.indexOf(".")){const r=t.split("."),i=r.length,n=i-1;let a=0,o=e;for(;a<i;a++){const e=r[a];if(a===n){if(o.hasOwnProperty(e))return o[e]}else{if(!(0,s.isPlainObject)(o[e]))break;o=o[e]}}}else if(e.hasOwnProperty(t))return e[t];return r}function c(e,t,r){if((0,s.isPlainObject)(e)&&(0,s.isStringNotEmpty)(t)&&!(0,s.isUndefined)(r)){if(-1===t.indexOf("."))return e[t]=r,!0;{const i=t.split("."),n=i.length,a=n-1;let o=0,c=e;for(;o<n;o++){const e=i[o];if(o===a)return c[e]=r,!0;if((0,s.isPlainObject)(c[e]))c=c[e];else{if(!(0,s.isUndefined)(c[e]))break;c=c[e]={}}}}}return!1}function u(e,t){return e=(0,s.isPlainObject)(e)?e:{},(0,s.isPlainObject)(e)&&(0,s.isPlainObject)(t)&&g(t,((t,r)=>{(0,s.isPlainObject)(r)?e[t]=u(e[t],r):Array.isArray(r)?e[t]=r.slice():e[t]=r})),e}function h(e,...t){return e=(0,s.isPlainObject)(e)?e:{},t.reduce(((e,t)=>u(e,t)),e)}function l(e,t){return e=(0,s.isPlainObject)(e)?e:{},(0,s.isPlainObject)(t)&&g(t,((t,r)=>{const i=!e.hasOwnProperty(t);(0,s.isPlainObject)(r)?(0,s.isPlainObject)(e[t])?e[t]=l(e[t],r):i&&(e[t]=u({},r)):i&&(e[t]=r)})),e}function p(e,...t){return e=(0,s.isPlainObject)(e)?e:{},t.reduce(((e,t)=>l(e,t)),e)}function g(e,t){Object.keys(e).forEach((r=>{t.call(this,r,e[r])}))}function f(e,t,r){return Object.keys(e).reduce(((r,i)=>t.call(this,r,e[i],i)),r)}const d={is:s,obj:i};async function m(e,...t){return new Promise((r=>{setTimeout((()=>{r(e(...t))}),0)}))}async function y(e,t){for(const r of e)await m(t,r)}const b=class{constructor(e,t,r){const i=S.parseType(e,!0);this.#e=i.type,this.#t=i.namespace,(0,s.isPlainObject)(t)&&(this.#r=!!(0,s.isBoolean)(t.bubbles)&&t.bubbles,this.#i=!!(0,s.isBoolean)(t.cancelable)&&t.bubbles),r instanceof S&&(this.#s=this.#n=r)}#e;get type(){return this.#e}#t=null;get namespace(){return this.#t}#r=!1;get bubbles(){return this.#r}#i=!1;get cancelable(){return this.#i}#a=!1;get defaultPrevented(){return this.#a}#s=null;get target(){return this.#s}set target(e){if(!(e instanceof S))throw new TypeError("The EmitterEvent.target must be an instance of Emitter.");this.#s=e}#n=null;get currenTarget(){return this.#n}set currenTarget(e){if(!(e instanceof S))throw new TypeError("The EmitterEvent.currenTarget must be an instance of Emitter.");this.#n=e}preventDefault(){this.cancelable&&(this.#a=!0)}isDefaultPrevented(){return this.defaultPrevented}#o=!1;stopPropagation(){this.#o=!0}isPropagationStopped(){return this.#o}};class E{static EVENT_TYPE_NAMESPACE_SEPARATOR=".";static parseType(e,t){if(!(0,s.isStringNotEmpty)(e))throw new TypeError("The 'type' argument must be a non-empty string.");let r=null,i=e;const n=e.indexOf(this.EVENT_TYPE_NAMESPACE_SEPARATOR);if(-1!==n&&(r=e.slice(n+1)||null,i=e.slice(0,n)||null),!r&&!i||!i&&t)throw new TypeError(`Unable to parse the event type: "${e}"`);return{type:i,namespace:r}}constructor(e,t){this.#c={...this.#c,...e},this.#u=t instanceof E?t:null}#h=new Map;get __events__(){return this.#h}#c={bubbles:!1,cancelable:!1};get __emitterEventDefaults__(){return this.#c}#u=null;get __parentEmitter__(){return this.#u}#l(e,t,r){if(!(0,s.isStringNotEmpty)(e))throw new TypeError("The 'type' argument must be a non-empty string.");if(!(0,s.isFunction)(t))throw new TypeError("The 'listener' argument must be a function.");r=r??this,e.split(" ").forEach((e=>{if(!(0,s.isStringNotEmpty)(e))return;const i=E.parseType(e,!0);let n=this.#h.get(i.type);n||this.#h.set(i.type,n=new Map);let a=n.get(i.namespace);a||n.set(i.namespace,a=new Map);let o=a.get(t);o||a.set(t,o=new Set),o.add(r)}))}#p(e,t,r){if(!(0,s.isStringNotEmpty)(e))throw new TypeError("The 'type' argument must be a non-empty string.");r=r??this,e.split(" ").forEach((e=>{if(!(0,s.isStringNotEmpty)(e))return;const i=E.parseType(e),n=[];if((0,s.isStringNotEmpty)(i.type))n.push(i.type);else if((0,s.isStringNotEmpty)(i.namespace))for(const[e,t]of this.#h)t.has(i.namespace)&&n.push(e);n.forEach((e=>{if(!this.#h.has(e))return;const n=this.#h.get(e);if(n.has(i.namespace)){if((0,s.isFunction)(t)){const e=n.get(i.namespace);if(!e.has(t))return;if((0,s.isUndefined)(r))e.delete(t);else{const i=e.get(t);if(!i.has(r))return;i.delete(r),0===i.size&&e.delete(t)}0===e.size&&n.delete(i.namespace)}else n.delete(i.namespace);0===n.size&&this.#h.delete(e)}}))}))}#g(e,t,r){return e.length>=2&&(0,s.isStringNotEmpty)(e[0])&&(0,s.isFunction)(e[1])?(3===e.length&&(r=e[2]),t.call(this,e[0],e[1],r)):e.length>=1&&(0,s.isPlainObject)(e[0])&&(2===e.length&&(r=e[1]),g(e[0],((e,i)=>{t.call(this,e,i,r)}))),this}on(e,t,r){return this.#g(arguments,this.#l)}off(e,t,r){return this.#g(arguments,this.#p)}emit(e,...t){if(e instanceof b){null===e.target&&(e.target=this),e.currenTarget!==this&&(e.currenTarget=this);const r=r=>{if(!r.has(e.namespace))return;const i=r.get(e.namespace);for(const[r,s]of i)for(const i of s)r.call(i,e,...t)};return this.#h.has(e.type)&&r(this.#h.get(e.type)),this.#h.has("*")&&r(this.#h.get("*")),e.bubbles&&!e.isPropagationStopped()&&this.#u instanceof E?this.#u.emit(e,...t):!e.isDefaultPrevented()}return!1}trigger(e,t,r){return!!(0,s.isStringNotEmpty)(e)&&(t=Array.isArray(t)?t:[],r=p(r,this.#c),e.split(" ").map((e=>this.emit(new b(e,r,this),...t))).every((e=>e)))}}const S=E,T=function(e){if((0,s.isStringNotEmpty)(e))return e;if(Array.isArray(e)&&e.length){const t=e.filter((e=>(0,s.isStringNotEmpty)(e))).join(",");return(0,s.isStringNotEmpty)(t)?t:null}return null};class P{static DEFAULT_CONVERT(e,t){return e}static DEFAULT_TEST(e,t){return null!=e&&e!==t.defaultValue}static DEFINITION(e){return(0,s.isPlainObject)(e)?{configuration:e,ctor:P}:Array.isArray(e)&&2===e.length&&(0,s.isPlainObject)(e[0])&&(0,s.isFunction)(e[1])?{configuration:e[0],ctor:e[1]}:null}static MERGE_DEFINITIONS(e,t){return function(e,t,r){return(0,s.isFunction)(r)?[...e,...t.filter((t=>!e.some((e=>r(e,t)))))]:[...e,...t.filter((t=>!e.includes(t)))]}(e,t,((e,t)=>{const r=P.DEFINITION(e),i=P.DEFINITION(t);return!(!r||!i)&&r.configuration.name===i.configuration.name}))}static create(e,t){const r=P.DEFINITION(t);return r?new r.ctor(e,r.configuration):null}static createAll(e,t){return t.reduce(((t,r)=>{const i=P.create(e,r);return i&&t.push(i),t}),[])}static getValues(e,t,r){const i={};for(const s of t){const t=s.getValue(e,r);if(s.required&&!s.test(t))return null;i[s.name]=t}return i}constructor(e,t){this.#f=e,this.#d=t.name,this.required=t.required??!1,this.defaultValue=t.defaultValue??null,this.#m=t.convert??P.DEFAULT_CONVERT,this.#y=t.test??P.DEFAULT_TEST,this.queryParent=t.queryParent??"^",this.queryPath=t.queryPath??"/",this.queryType=t.queryType??":",Array.isArray(t.obj)&&(this.obj=t.obj.map((e=>this.objectQuery(e))).filter((e=>null!=e))),Array.isArray(t.elem)&&(this.elem=t.elem.map((e=>this.elementQuery(e))).filter((e=>null!=e)))}#f;get typeParser(){return this.#f}get parser(){return this.typeParser.parser}#d;get name(){return this.#d}required;defaultValue;queryParent;queryPath;queryType;obj=[];elem=[];#m;#y;#b=new Map;objectQuery(e){if((0,s.isStringNotEmpty)(e)){let t=e,r=[];if(-1!==t.indexOf(this.queryPath)){const e=t.split(this.queryPath);t=e.pop(),r.push(e)}const i=e=>{let t=e;for(const e of r)if(t=t[e],!t)break;return t??null};return{raw:e,name:t,path:r,getValue:e=>{const r=i(e);return r?this.convert(r[t])??this.defaultValue:this.defaultValue}}}return null}elementQuery(e){if((0,s.isStringNotEmpty)(e)){let t=e,r=0,i=null,s="prop";for(;t[0]===this.queryParent;)r++,t=t.slice(1);if(-1!==t.indexOf(this.queryPath)){const e=t.split(this.queryPath);i=e[0],t=e[1]}if(-1!==t.indexOf(this.queryType)){const e=t.split(this.queryType);s=e[0],t=e[1]}const n=e=>{let t=e;for(let e=0;e<r&&(t=t.parentElement,t);e++);return t&&i?t.querySelector(i):t};let a;switch(s){case"prop":a=e=>this.convert(e[t])??this.defaultValue;break;case"data":a=e=>this.convert(e.dataset[t])??this.defaultValue;break;case"attr":a=e=>e.hasAttribute(t)?this.convert(e.getAttribute(t)):this.defaultValue;break;default:a=()=>this.defaultValue}return{raw:e,name:t,type:s,parents:r,selector:i,getValue:e=>{const t=n(e);return t?a(t):this.defaultValue}}}return null}getValue(e,t){if(!t&&this.#b.has(e))return this.#b.get(e);let r,i=this.defaultValue;if(e instanceof HTMLElement)for(r of this.elem){const t=r.getValue(e);if(this.test(t)){i=t;break}}else if((0,s.isPlainObject)(e))for(r of this.obj){const t=r.getValue(e);if(this.test(t)){i=t;break}}const n={name:this.name,type:this.typeParser.name,value:i,query:r,ref:e};return this.parser.trigger("get-property",[n]),this.#b.set(e,n.value),n.value}convert(e){return this.#m(e,this)}test(e){return this.#y(e,this)}}class v{parent;type;ref;requiredProperties;#E=null;constructor(e,t,r,i){this.parent=e,this.type=t,this.ref=r,i instanceof EventTarget&&(this.#E=i)}get triggerTarget(){return this.#E}set triggerTarget(e){if(!(e instanceof EventTarget))throw new TypeError("The Item.trigger property must be an instance of EventTarget!");this.#E=e}getProperties(e){return{...this.type.getProperties(this.ref,e),type:this.type.name}}#S;get properties(){return this.#S||(this.#S=this.getProperties()),this.#S}}class O{static DEFINITION(e){return(0,s.isStringNotEmpty)(e)?{name:e,ctor:O}:Array.isArray(e)&&2===e.length&&(0,s.isStringNotEmpty)(e[0])&&(0,s.isFunction)(e[1])?{name:e[0],ctor:e[1]}:null}static create(e,t){const r=O.DEFINITION(t);return r?new r.ctor(e,r.name):null}static createAll(e,t){return t.reduce(((t,r)=>{const i=O.create(e,r);return i&&t.push(i),t}),[]).sort(((e,t)=>e.priority-t.priority))}constructor(e,t){this.#T=e,this.#d=t,p(this.config,this.defaults),this.#P=T(this.config.include),this.#v=T(this.config.exclude),this.#S=P.createAll(this,P.MERGE_DEFINITIONS(this.config.properties,this.parser.config.defaultProperties)),this.#O=this.properties.filter((e=>e.required))}#T;get parser(){return this.#T}#d;get name(){return this.#d}get defaults(){return{priority:0,include:[],exclude:[],properties:[]}}get config(){return(0,s.isPlainObject)(this.parser.config[this.name])?this.parser.config[this.name]:this.parser.config[this.name]={}}#w;get priority(){return this.#w}#P;get includeSelector(){return this.#P}#v;get excludeSelector(){return this.#v}#S;get properties(){return this.#S}#O;get requiredProperties(){return this.#O}#b=new Map;#I=new Map;#_=new Map;includes(e){return e instanceof HTMLElement?null!==this.includeSelector&&e.matches(this.includeSelector):!!(0,s.isPlainObject)(e)&&e.type===this.name}excludes(e){return e instanceof HTMLElement&&null!==this.excludeSelector&&e.matches(this.excludeSelector)}canParse(e){return this.includes(e)&&!this.excludes(e)}create(e,t,r){return t instanceof HTMLElement||(0,s.isPlainObject)(t)?new v(e,this,t,r):null}parse(e,t,r){let i;if(i=this.#b.has(t)?this.#b.get(t):this.create(e,t,this.getTrigger(t)),i instanceof v){const e=this.getRequiredProperties(t,r);if(!e)return this.#b.delete(t),null;i.requiredProperties=e,this.#b.set(t,i)}return i}getTrigger(e){return e instanceof HTMLElement?e:null}getRequiredProperties(e,t){if(!t&&this.#I.has(e))return this.#I.get(e);const r=P.getValues(e,this.requiredProperties,t);return this.#I.set(e,r),r}getProperties(e,t){if(!t&&this.#_.has(e))return this.#_.get(e);const r=P.getValues(e,this.properties,t);return this.#_.set(e,r),r}}class w{parser;ref;options;#E=null;items=[];constructor(e,t,r,i){this.parser=e,this.ref=t,this.options=h({},r),i instanceof EventTarget&&(this.#E=i)}get triggerTarget(){return this.#E}set triggerTarget(e){if(!(e instanceof EventTarget))throw new TypeError("The Container.triggerTarget property must be an instance of EventTarget.");this.#E=e}get firstIndex(){return this.items.length?0:-1}get lastIndex(){return this.items.length?this.items.length-1:-1}withinRange(e){return(0,s.isNumber)(e)&&e>=this.firstIndex&&e<=this.lastIndex}getByIndex(e){return this.withinRange(e)?this.items[e]:null}getFirst(){return-1!==this.firstIndex?this.items[this.firstIndex]:null}getLast(){return-1!==this.lastIndex?this.items[this.lastIndex]:null}getNext(e,t){const r=this.items.indexOf(e);if(-1!==r){let e=r+1;const i=this.withinRange(e);if(i)return this.items[e];if(!i&&t)return this.getFirst()}return null}getPrevious(e,t){const r=this.items.indexOf(e);if(-1!==r){let e=r-1;const i=this.withinRange(e);if(i)return this.items[e];if(!i&&t)return this.getLast()}return null}get[Symbol.toStringTag](){return"Container"}}const I={__types__:["image","iframe"],priority:49,include:[".foobox,[data-foobox],[data-foobox-items]"],exclude:[".nolightbox"],data:{options:"foobox",items:"fooboxItems"},defaultProperties:[{name:"url",obj:["url","href"],elem:["data:href","data:url","href"],required:!0,test:s.isStringNotEmpty},{name:"title",obj:["title"],elem:["data:title","title","img/title"],test:s.isStringNotEmpty},{name:"description",obj:["description"],elem:["data:description","img/alt"],test:s.isStringNotEmpty},{name:"width",obj:["width"],elem:["data:width"]},{name:"height",obj:["height"],elem:["data:height"]},{name:"aspectRatio",obj:["aspectRatio"],elem:["data:aspectRatio"]}],image:{priority:10,include:["[href^='http'][href*='.svg']","[href^='http'][href*='.png']","[href^='http'][href*='.jpg']","[href^='http'][href*='.jpeg']","[href^='http'][href*='.webp']","[href^='http'][href*='.gif']","[href^='http'][href*='.bmp']","[href^='http'][href*='fakeimg.pl']","[href^='http'].foobox-image"],exclude:[]},iframe:{priority:20,include:["[href^='http'][target='foobox']","[href^='http'].foobox-iframe"],exclude:[]}};s.isStringNotEmpty;class _ extends S{static DEFINITION(e){return(0,s.isStringNotEmpty)(e)?{name:e,ctor:_}:Array.isArray(e)&&2===e.length&&(0,s.isStringNotEmpty)(e[0])&&(0,s.isFunction)(e[1])?{name:e[0],ctor:e[1]}:null}static create(e,t){const r=_.DEFINITION(t);return r?new r.ctor(e,r.name):null}static createAll(e,t){return t.reduce(((t,r)=>{const i=_.create(e,r);return i&&t.push(i),t}),[]).sort(((e,t)=>e.priority-t.priority))}constructor(e,t){super({bubbles:!0},e),this.#N=e,this.#d=t,this.#w=this.config.priority,this.#P=T(this.config.include),this.#v=T(this.config.exclude),this.#j=O.createAll(this,this.config.__types__),this.#A=T(this.#j.map((e=>e.includeSelector)))}#N;get plugin(){return this.#N}#d;get name(){return this.#d}get config(){return(0,s.isPlainObject)(this.plugin.config[this.name])?this.plugin.config[this.name]:this.plugin.config[this.name]={__types__:[]}}#w;get priority(){return this.#w}#P;get includeSelector(){return this.#P}#v;get excludeSelector(){return this.#v}#j=[];#A;get typesSelector(){return this.#A}#x=new Map;#D=new Map;get isDocumentParser(){return!0}includes(e){return e instanceof HTMLElement&&null!==this.includeSelector&&e.matches(this.includeSelector)}excludes(e){return e instanceof HTMLElement&&null!==this.excludeSelector&&e.matches(this.excludeSelector)}canParse(e){return this.includes(e)&&!this.excludes(e)}data(e,t){if(!t&&this.#D.has(e))return this.#D.get(e);const r=f(this.config.data,((t,r,i)=>{if((0,s.isStringNotEmpty)(r)&&e.dataset.hasOwnProperty(r)){let s;try{s=JSON.parse(e.dataset[r])}catch(t){console.error(`Invalid dataset.${r} JSON string supplied.`,e.dataset,r,t),s=null}finally{t[i]=s}}else t[i]=null;return t}),{});return this.#D.set(e,r),r}async parseDocument(e,t){const r=[];for(const i of this.config.include)await y(document.querySelectorAll(i),(i=>{if(e.has(i)||this.excludes(i))return;const s=this.parse(i,e,t);s&&(r.push(s),e.add(i))}));return this.purgeCache(r),r}purgeCache(e){for(const t of this.#x.values())e.includes(t)&&!this.shouldPurge(t)||(this.#x.delete(t.ref),this.trigger("removed-container",[t]))}shouldPurge(e){return!1}getArgs(e,t){let r=null,i=[],n={};if(e instanceof HTMLElement){const a=this.data(e,t);(0,s.isPlainObject)(a.options)&&(n=a.options),Array.isArray(a.items)?(r=e,i.push(...a.items)):(e.matches(this.typesSelector)&&i.push(e),i.push(...e.querySelectorAll(this.typesSelector)))}return{options:n,itemRefs:i,trigger:r}}create(e,t,r){return e instanceof HTMLElement?new w(this,e,t,r):null}parse(e,t,r){const{itemRefs:i,options:s,trigger:n}=this.getArgs(e,r);let a,o=!1;if(this.#x.has(e)?(a=this.#x.get(e),o=!0):a=this.create(e,s,n),a instanceof w){const s=this.parseItems(a,i,t,r);if(o){const e=this.compareItems(s,a.items);a.items.length=0,a.items.push(...s),(e.added.length>0||e.removed.length>0)&&this.trigger("updated-container",[a,e])}else a.items.push(...s),this.trigger("added-container",[a]);this.#x.set(e,a)}return a}parseItems(e,t,r,i){const s=[];for(const n of t){if(r.has(n)||this.excludes(n))continue;const t=this.parseItem(e,n,i);t&&(s.push(t),r.add(n))}return s}parseItem(e,t,r){const i=this.#j.find((e=>e.canParse(t)));return i?i.parse(e,t,r):null}compareItems(e,t){return{removed:t.filter((t=>!e.includes(t))),added:e.filter((e=>!t.includes(e)))}}}const N=class extends S{constructor(e){super(),this.config=p(e,this.config),this.on({"added-container":this.#R,"removed-container":this.#L,"updated-container":this.#q},this)}isParser(e){return e===_}config={__parsers__:[]};#F=null;#C=new Map;#V=new Map;#M=null;#k=[];get __parsers__(){return this.#k}get RS_DEFAULT(){return 0}get RS_INITIALIZING(){return 1}get RS_INITIALIZED(){return 2}get RS_READY(){return 3}#U=this.RS_DEFAULT;get readyState(){return this.#U}set#H(e){if(this.#U===e)return;if(!(0,s.isNumber)(e))throw new TypeError("The 'value' argument must be a number.");if(e<this.#U)throw new RangeError("The 'value' argument can't be less than the current readyState.");if(e>this.RS_READY)throw new RangeError("The 'value' argument can't be more than the RS_READY value.");this.#U=e,this.documentDispatch("foobox-readystatechange"),this.trigger("readystatechange",[e]);const t=["evaluated","initializing","initialized","ready"];this.documentDispatch(`foobox-${t[e]}`),this.trigger(t[e])}async init(e){this.readyState===this.RS_DEFAULT&&(this.#H=this.RS_INITIALIZING,h(this.config,e),this.#k=_.createAll(this,this.config.__parsers__),this.#H=this.RS_INITIALIZED,await this.parseDocument(!0),this.#H=this.RS_READY,this.observe())}documentDispatch(e,t){return(0,s.isString)(e)&&(e=new CustomEvent(e,h({detail:this},t))),e instanceof Event&&document.dispatchEvent(e)}observe(){this.config.watch&&(this.#F||(this.#F=new MutationObserver((()=>{this.parseDocument()}))),this.#F.observe(document,{childList:!0,subtree:!0}))}unobserve(){this.config.watch&&this.#F&&this.#F.disconnect()}registerParser(e,t,r){if(this.readyState<this.RS_INITIALIZED&&!this.config.hasOwnProperty(e)){const i=(0,s.isFunction)(r)?r:_;return this.config.__parsers__.push([e,i]),this.config[e]=h({},t),!0}return!1}unregisterParser(e){return!!(this.readyState<this.RS_INITIALIZED&&this.config.hasOwnProperty(e))&&(this.config.__parsers__=this.config.__parsers__.filter((t=>{const r=_.DEFINITION(t);return!!r&&r.name!==e})),delete this.config[e],!0)}removeTriggerListener(e){if(e instanceof EventTarget&&this.#V.has(e)){const t=this.#V.get(e);e.removeEventListener("click",t,!1),this.#V.delete(e)}}addTriggerListener(e,t,r){if(e instanceof EventTarget){this.#V.has(e)&&e.removeEventListener("click",this.#V.get(e),!1);const i=e=>{e.preventDefault(),this.trigger("triggered-container",[t,r])};this.#V.set(e,i),e.addEventListener("click",i,!1)}}getDocumentParsers(){return this.#k.filter((e=>e.isDocumentParser))}getRefParser(e){return this.#k.find((t=>t.canParse(e)))??null}getAll(){return Array.from(this.#C.values())}find(e){if(this.#C.has(e))return this.#C.get(e);if((0,s.isStringNotEmpty)(e)){const t=document.querySelector(e);if(t&&this.#C.has(t))return this.#C.get(t)}return null}getRefs(e){const t=new Set;return this.getAll().reduce(((t,r)=>(r.ref!==e&&(t.add(r.ref),r.items.forEach((r=>{r.ref!==e&&t.add(r.ref)}))),t)),t)}async parseDocument(e){return this.readyState<this.RS_INITIALIZED?[]:this.#M?this.#M:(e=e??!1,this.#M=new Promise((async t=>{const r=[],i=new Set;await y(this.getDocumentParsers(),(async t=>{const s=await t.parseDocument(i,e);r.push(...s)})),this.#M=null,t(r)})))}parse(e,t){if(this.readyState<this.RS_INITIALIZED)return null;t=t??!1;const r=this.getRefParser(e);if(r){const i=this.getRefs(e);return r.parse(e,i,t)}return null}#R(e,t){this.addTriggerListener(t.triggerTarget,t),t.items.forEach((e=>this.addTriggerListener(e.triggerTarget,t,e))),this.#C.set(t.ref,t)}#q(e,t,r){r.removed.forEach((e=>this.removeTriggerListener(e.triggerTarget))),r.added.forEach((e=>this.addTriggerListener(e.triggerTarget,t,e))),this.#C.set(t.ref,t)}#L(e,t){this.removeTriggerListener(t.triggerTarget),t.items.forEach((e=>this.removeTriggerListener(e.triggerTarget))),this.#C.delete(t.ref)}},j={...I,priority:99,include:[]};class A extends _{async parseDocument(e,t){const r=[];return await y(this.config.include,(i=>{if(!e.has(i)){const s=this.parse(i,e,t);s&&s.items.length&&(r.push(s),e.add(i))}})),this.purgeCache(r),r}shouldPurge(e){return 0===e.items.length}create(e,t,r){return(0,s.isStringNotEmpty)(e)?new w(this,e,t,r):super.create(e,t,r)}getArgs(e,t){return(0,s.isStringNotEmpty)(e)?{trigger:null,options:{},itemRefs:document.querySelectorAll(e)}:super.getArgs(e,t)}}const x=new N({__parsers__:[["default",_],["groups",A]],default:I,groups:j,watch:!1});x.utils=d,x.Plugin=N,x.Parser=_,x.GroupParser=A,x.PARSER_DEFAULTS=I,x.GROUP_PARSER_DEFAULTS=j;const D=x},320:(e,t,r)=>{function i(e){return null!=e&&"[object Boolean]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&("[object Function]"===Object.prototype.toString.call(e)||"function"==typeof e||e instanceof Function)}function n(e){return null!=e&&"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)}function a(e){return null!=e&&"object"==typeof e}function o(e){if(a(e)){const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return!1}function c(e){return null!=e&&e instanceof Promise}function u(e){return null!=e&&"[object String]"===Object.prototype.toString.call(e)}r.r(t),r.d(t,{isBoolean:()=>i,isFunction:()=>s,isNumber:()=>n,isObject:()=>a,isPlainObject:()=>o,isPromise:()=>c,isString:()=>u,isStringNotEmpty:()=>l,isUndefined:()=>p});const h=/^\s*$/;function l(e){return u(e)&&!h.test(e)}function p(e){return void 0===e}}},r={};function i(e){var s=r[e];if(void 0!==s)return s.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,i),n.exports}i.m=t,e=[],i.O=(t,r,s,n)=>{if(!r){var a=1/0;for(h=0;h<e.length;h++){for(var[r,s,n]=e[h],o=!0,c=0;c<r.length;c++)(!1&n||a>=n)&&Object.keys(i.O).every((e=>i.O[e](r[c])))?r.splice(c--,1):(o=!1,n<a&&(a=n));if(o){e.splice(h--,1);var u=s();void 0!==u&&(t=u)}}return t}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[r,s,n]},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={958:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var s,n,[a,o,c]=r,u=0;if(a.some((t=>0!==e[t]))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(c)var h=c(i)}for(t&&t(r);u<a.length;u++)n=a[u],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(h)},r=self.webpackChunkfoobox=self.webpackChunkfoobox||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var s=i(80);s=i.O(s),FooBox=s.default})();
//# sourceMappingURL=foobox.js.map